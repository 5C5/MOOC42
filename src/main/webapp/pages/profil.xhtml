
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:p="http://primefaces.org/ui"
                template="/templates/template.xhtml">

    <ui:define name="head"></ui:define>
    
    <ui:define name="title">#{fr['general.profil.title']}</ui:define>

    <ui:define name="body-site">
 		<p:panel header="#{fr['general.profil.title']} de #{profilMBean.profil.prenom} #{profilMBean.profil.nom}">
       		<h:form >
	        	<h:panelGrid columns="2">
	        		<!-- Parametres du compte -->
                    <p:panel header="#{fr['profil.parametre']}">
                        <h:panelGrid columns="2" cellpadding="10">
                        <!-- Modification du mot de passe -->
                            <p:outputLabel for="basic" value="#{fr['profil.motdepasse']} : " /> 
                            <p:commandButton value="#{fr['profil.motdepasse.button']}" type="button" onclick="PF('dlgMdp').show();" />
                        <!-- Modification du theme -->
                            <p:outputLabel for="basic" value="#{fr['profil.theme']} : " /> 
                            <p:themeSwitcher id="basic" style="width:165px">
                                <f:selectItem itemLabel="Choisir un thÃ¨me ..." itemValue="" />
                                <f:selectItems value="#{profilMBean.themes}" var="theme" itemLabel="#{theme.displayName}" itemValue="#{theme.name}"/>
                            </p:themeSwitcher>
                        </h:panelGrid>
                    </p:panel>
                    
                    <!-- Notions -->
                    <p:panel header="#{fr['profil.niveau.title']}">
                        <ui:repeat var="niv" value="#{profilMBean.profil.niveaux}" >
                            <h:panelGrid columns="2" cellpadding="5">
                                <h:outputText value="#{niv.nom}"/>
                                <p:rating value="#{niv.niveau}" readonly="true" stars="3"/>
                                <p:commandButton id="levelUp" value="Level up" action="#{profilMBean.levelUp}" update="@form">
                                    <f:setPropertyActionListener target="#{profilMBean.idConnaissanceLevelUp}" value="#{niv.id}" />
                                    <f:setPropertyActionListener target="#{profilMBean.connaissanceLevelc}" value="#{niv.niveau}" />
                                </p:commandButton>
                            </h:panelGrid>
                        </ui:repeat>
                    </p:panel>
                </h:panelGrid>
                
                <p:panel header="#{fr['profil.evolution.competence']}">
                <p:dataTable var="ligne" value="#{profilMBean.profil.evolution}">                 
                    <p:column headerText="#{fr['profil.evolution.date']}">
                        <h:outputText value="#{ligne.date}" />
                    </p:column>
                 
                    <p:column headerText="#{fr['profil.evolution.niveau']}">
                        <p:rating value="#{ligne.niveau}" readonly="true" stars="3"/>
                    </p:column>
                 
                    <p:column headerText="#{fr['profil.evolution.remarque']}">
                        <h:outputText value="#{ligne.remarque}" />
                    </p:column>
                </p:dataTable>
                </p:panel>
	        	
	        	
             <!-- Modification du mot de passe -->
             <p:dialog header="#{fr['profil.motdepasse']}" widgetVar="dlgMdp">
                <h:panelGrid columns="2">
                    <p:outputLabel for="ancienMdp" value="#{fr['profil.motdepasse.ancien']}" />  
                    <p:password id="ancienMdp" value="#{profilMBean.ancienMdp}"/>
                    <p:outputLabel for="nouveauMdp" value="#{fr['profil.motdepasse.nouveau']}" />  
                    <p:password id="nouveauMdp" value="#{profilMBean.nouveauMdp}"/>                    
                    <p:outputLabel for="confimMdp" value="#{fr['profil.motdepasse.confirm']}" />  
                    <p:password id="confimMdp" value="#{profilMBean.confirmMdp}"/>
                </h:panelGrid>

                <p:commandButton id="modifierMdp" value="#{fr['profil.motdepasse.button']}"
                    action="#{profilMBean.modifierMdp}" onclick="waiting.show()" style="left:100px;" />
            </p:dialog>   
            
	        </h:form> 
            
	     </p:panel>  
	    </ui:define>

</ui:composition>
