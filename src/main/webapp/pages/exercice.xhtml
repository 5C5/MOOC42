<!-- Pages d'exercices -->
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:p="http://primefaces.org/ui"
                xmlns:pe="http://primefaces.org/ui/extensions"
                template="/templates/template.xhtml">

    <ui:define name="head"></ui:define>
    
    <ui:define name="title">#{fr['general.exercice.title']}</ui:define>

    <ui:define name="body-site">
        
 		<p:panel header="#{fr['general.exercice.title']}">
       		<h:form id="form_exer">
                <h:outputScript library="js" name="diagram.js" />
                <input type="hidden" id="notionSwitch" value="#{exerciceMBean.notionSwitch}"/>
                 <pe:remoteCommand id="solutionRecalculer" name="solutionRecalculer" process="@this" update=":form_exer:panelDiag" 
                    actionListener="#{exerciceMBean.solutionRecalculer}" >  
<!--                     <pe:methodSignature parameters="org.primefaces.model.diagram.DefaultDiagramModel" />   -->
<!--                     <pe:methodParam name="diag">   -->
<!--                         <pe:convertJson />   -->
<!--                     </pe:methodParam>   -->
                    <pe:methodSignature parameters="java.lang.String" />  
                     <pe:methodParam name="idElement"/>  
                </pe:remoteCommand>  
       			<p:fieldset legend="#{fr['exercice.param']}">
                    <h:panelGrid columns="2">
               			<p:outputLabel for="notions" value="#{fr['exercice.notions']}"/>
                        
                        <p:outputLabel for="niveau" value="#{fr['exercice.niveau']}"/>
                        
               			<p:selectManyCheckbox id="notions" layout="grid" columns="2" style="padding:2px;padding-right:30px;" value="#{exerciceMBean.selectedNotions}" disabled="#{exerciceMBean.disabled}">
                            <f:selectItems value="#{exerciceMBean.notions}" var="notion" itemLabel="#{notion.nom}" itemValue="#{notion.id}" />
               			</p:selectManyCheckbox>
                        
                        <p:selectOneRadio id="niveau" layout="grid" columns="1" style="padding:2px" value="#{exerciceMBean.niveau}" disabled="#{exerciceMBean.disabled}">
                            <f:selectItem itemLabel="#{fr['exercice.niveau.facile']}" itemValue="1" />
                            <f:selectItem itemLabel="#{fr['exercice.niveau.moyen']}" itemValue="2" />
                            <f:selectItem itemLabel="#{fr['exercice.niveau.difficile']}" itemValue="3" />
                        </p:selectOneRadio>
       			
       			      </h:panelGrid>
                      
                      <p:commandButton value="#{fr['exercice.demarrer']}" action="#{exerciceMBean.generer}" update="@form" rendered="#{!exerciceMBean.disabled}"/>
       			</p:fieldset>
       			<p:panel id="panelDiag" header="#{fr['exercice.title']}" rendered="#{exerciceMBean.disabled}">
                <!-- rendered="#{exerciceMBean.disabled}" -->
           			<p:diagram id="diag" value="#{exerciceMBean.root}" style="height:400px" styleClass="ui-widget-content" >
                    </p:diagram>
           			<style type="text/css">
        				.ui-diagram-element {   
          		  			width:5em; 
    				        height:5em;
    				        line-height:5em;
    				        text-align: center;
    				        box-shadow: 0 5px 10px rgba(0, 0, 0, 0.8);
    				        border-radius: 5em;
    				        border: 1px solid #404a4e;
    				        background-color: #404a4e;
    				        color: #cccccc;
        				}
     
        				.ui-diagram-element:hover {
            				background-color: #20282b;
        				}
    				</style>
                    
       			</p:panel>
	        </h:form> 
	     </p:panel>  
	    </ui:define>

</ui:composition>