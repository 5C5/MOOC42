<!-- Pages d'exercices -->
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:p="http://primefaces.org/ui"
                xmlns:pe="http://primefaces.org/ui/extensions"
                template="/templates/template.xhtml">

    <ui:define name="head"></ui:define>
    
    <ui:define name="title">#{fr['general.bac.sable.title']}</ui:define>

    <ui:define name="body-site">
        
 		<p:panel header="#{fr['general.bac.sable.title']}">
       		<h:form id="form_exer">
                <h:outputScript library="js" name="diagram.js" />
                 <pe:remoteCommand id="solutionRecalculer" name="solutionRecalculer" process="@this" update=":form_exer:panelDiag" 
                    actionListener="#{bacSableMBean.solutionRecalculer}" >  
                    <pe:methodSignature parameters="java.lang.String" />  
                     <pe:methodParam name="idElement"/>  
                </pe:remoteCommand>  
                
       			<p:fieldset legend="#{fr['bac.parametre']}">
                    <p:dataTable var="ligne" value="#{bacSableMBean.table}" style="margin : 20px;" >
                        <p:column headerText="Input" >
                            <p:selectOneButton value="#{ligne.entree}">
                                <f:selectItem itemLabel="EntrÃ©e" itemValue="0" />
                            </p:selectOneButton>
                        </p:column>
                        <p:column headerText="Colonne 1">
                            <p:selectOneButton value="#{ligne.col1}">
                                <f:selectItem itemLabel="Porte unaire" itemValue="1" />
                                <f:selectItem itemLabel="Porte binaire" itemValue="2" />
                            </p:selectOneButton>
                        </p:column>
                        <p:column headerText="Colonne 2">
                            <p:selectOneButton value="#{ligne.col2}">
                                <f:selectItem itemLabel="Porte unaire" itemValue="1" />
                                <f:selectItem itemLabel="Porte binaire" itemValue="2" />
                            </p:selectOneButton>
                        </p:column>
                       <p:column headerText="Colonne 3">
                            <p:selectOneButton value="#{ligne.col3}">
                                <f:selectItem itemLabel="Porte unaire" itemValue="1" />
                                <f:selectItem itemLabel="Porte binaire" itemValue="2" />
                            </p:selectOneButton>
                        </p:column>
                        
                    </p:dataTable>
                    
                      <p:commandButton value="#{fr['bac.demarrer']}" action="#{bacSableMBean.generer}" update="@form" rendered="#{!bacSableMBean.disabled}"/>
       			      <p:commandButton value="#{fr['bac.reset']}" action="#{bacSableMBean.reset}" update="@form" rendered="#{bacSableMBean.disabled}"/>
                      <p:commandButton value="#{fr['bac.maj']}" action="#{bacSableMBean.maj}" update="@form" rendered="#{bacSableMBean.disabled}"/>
                
                </p:fieldset>
       			<p:panel id="panelDiag" header="#{fr['bac.title']}" rendered="#{bacSableMBean.disabled}">
           			<p:diagram id="diag" value="#{bacSableMBean.exercice.root}" style="height:45em" styleClass="ui-widget-content" >
                        <p:ajax event="connect" listener="#{bacSableMBean.onConnect}" />
                        <p:ajax event="disconnect" listener="#{bacSableMBean.onDisconnect}" />
                        <p:ajax event="connectionChange" listener="#{bacSableMBean.onConnectionChange}" />
                    </p:diagram>
           			<style type="text/css">
        				.ui-diagram-element {   
          		  			width:5em; 
    				        height:5em;
    				        line-height:5em;
    				        text-align: center;
    				        box-shadow: 0 5px 10px rgba(0, 0, 0, 0.8);
    				        border-radius: 5em;
    				        border: 1px solid #404a4e;
    				        background-color: #404a4e;
    				        color: #cccccc;
        				}
     
        				}
        				.porte, .porteNot {
        					color: #000000;
        					background-color: #7F91C3;
        					border: 1px solid #7F91C3;
    				        box-shadow: 0 5px 10px rgba(127, 145, 195, 0.8);
    				        
        				}
        				.sortieUtilisateur {
        					color: #000000;
        					background-color: #DD3F4C;
        					border: 1px solid #DD3F4C;
    				        box-shadow: 0 5px 10px rgba(201, 36, 50, 0.8);
        				}
     
        				.porte:hover, .porteNot:hover{
            				background-color: #5C6B94;
        				}
        				.entree {
        					color: #000000;
        					background-color: #7EE67C;
        					border: 1px solid #7EE67C;
    				        box-shadow: 0 5px 10px rgba(126, 230, 124, 0.8);
        				}
        				
        				.sortieSolution{
        					color: #000000;
        					background-color: #E8A958;
        					border: 1px solid #E8A958;
    				        box-shadow: 0 5px 10px rgba(232, 169, 88, 0.8);
        				}
    				</style>
                      
       			</p:panel>
	        </h:form> 
	     </p:panel>  
	    </ui:define>

</ui:composition>